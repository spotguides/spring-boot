apiVersion: v1
name: 'Spring Boot with SQL'
description: 'A spotguide for a Spring Boot application which talks with a MySQL database.'
tags: ['Java', 'Spring', 'SQL']
resources:
  sumCpu: 2
  sumMem: 2
  filters: []
  sameSize: true
  onDemandPct: 0
  minNodes: 1
  maxNodes: 2
questions:
- type: secret
  dataType: password
  name: docker-hub
  group: Docker Hub (image repository)
  required: true
  tags:
  - app:docker
  targets:
  - name: build_container.secretFrom.DOCKER_USERNAME.name
  - name: build_container.secretFrom.DOCKER_PASSWORD.name
- type: secret
  dataType: password
  name: mongodb
  group: MongoDB
  order: 1
  required:
    username: true
  default:
    username: username
  tags:
  - app:mongodb
  targets:
  - name: install_mongodb_user_secret.cluster_secret.sourceSecretName
  - username: deploy_application.deployment.values.mongodb.mongodbUsername
- type: pipeline
  dataType: string
  label: MongoDB database
  default: node-application
  group: MongoDB
  required: true
  order: 2
  targets:
  - deploy_application.deployment.values.mongodb.mongodbDatabase
- type: pipeline
  key: mongodb_root_password
  group: MongoDB
  dataType: boolean
  label: Customize MongoDB root user
  default: false
  order: 3
- type: secret
  dataType: password
  name: mongodb-root
  group: MongoDB
  order: 4
  default:
    username: admin
  disabled:
    username: true
  label:
    username: Root username
    password: Root password
  tags:
  - app:mongodb
  targets:
  - name: install_mongodb_root_secret.cluster_secret.sourceSecretName
  showIf:
    properties:
      mongodb_root_password:
        const: true
- type: pipeline
  key: application_resources
  group: Resources
  dataType: boolean
  label: Customize application resources
  default: false
  order: 1
- type: pipeline
  dataType: string
  label: Memory request
  default: 128Mi
  group: Resources
  pattern: ^\d+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$
  description: Minimum amount of memory the Node.js container needs
  required: true
  order: 2
  targets:
  - deploy_application.deployment.values.application.deployment.resources.requests.memory
  showIf:
    properties:
      application_resources:
        const: true
- type: pipeline
  dataType: string
  label: Memory limit
  default: 512Mi
  group: Resources
  pattern: ^\d+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$
  description: Maximum amount of memory the Node.js container can use
  required: true
  order: 3
  targets:
  - deploy_application.deployment.values.application.deployment.resources.limits.memory
  showIf:
    properties:
      application_resources:
        const: true
- type: pipeline
  dataType: string
  label: CPU request
  default: 250m
  group: Resources
  pattern: ^\d+(\.?\d+|m)?$
  description: Minimum amount of CPU the Node.js container needs
  required: true
  order: 4
  targets:
  - deploy_application.deployment.values.application.deployment.resources.requests.cpu
  showIf:
    properties:
      application_resources:
        const: true
- type: pipeline
  dataType: string
  label: CPU limit
  default: 500m
  group: Resources
  pattern: ^\d+m$
  description: Maximum amount of CPU the Node.js container can use
  required: true
  order: 5
  targets:
  - deploy_application.deployment.values.application.deployment.resources.limits.cpu
  showIf:
    properties:
      application_resources:
        const: true